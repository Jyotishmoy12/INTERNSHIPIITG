{% extends "layout.html" %}
{% block content %}
<style>
    body {
        font-family: 'Poppins', sans-serif;
        background-color: #f0f4f8;
        color: #333;
        line-height: 1.6;
    }
    .dashboard-container {
        max-width: 1800px;
        margin: 40px auto;
        padding: 40px;
        background-color: #fff;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        border-radius: 15px;
    }
    h1 {
        color: #2c3e50;
        text-align: left;
        margin-bottom: 30px;
        font-size: 2.8em;
        font-weight: 700;
    }
    .dashboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
    }
    .action-buttons {
        display: flex;
        gap: 15px;
    }
    .filter-form {
        background-color: #e8f0fe;
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 40px;
    }
    .form-row {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
    }
    .form-group {
        flex: 1;
    }
    .form-control {
        width: 100%;
        padding: 12px;
        border: 1px solid #ced4da;
        border-radius: 8px;
        font-size: 16px;
    }
    .btn {
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        transition: all 0.3s;
        font-size: 14px;
    }
    .btn-primary { background-color: #4a90e2; border-color: #4a90e2; }
    .btn-primary:hover { background-color: #3a7bc8; }
    .btn-secondary { background-color: #6c757d; border-color: #6c757d; }
    .btn-secondary:hover { background-color: #5a6268; }
    .btn-success { background-color: #28a745; border-color: #28a745; }
    .btn-success:hover { background-color: #218838; }
    .btn-danger { background-color: #dc3545; border-color: #dc3545; }
    .btn-danger:hover { background-color: #c82333; }
    .btn-info { background-color: #17a2b8; border-color: #17a2b8; }
    .btn-info:hover { background-color: #138496; }
    .table-responsive {
        overflow-x: auto;
    }
    .table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 30px;
    }
    .table th, .table td {
        border: none;
        padding: 16px;
        text-align: left;
    }
    .table th {
        background-color: #4a90e2;
        color: #fff;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .table tr:nth-child(even) {
        background-color: #f8f9fa;
    }
    .table tr:hover {
        background-color: #e9ecef;
    }
    .admin-panel-link {
        display: inline-block;
        margin-top: 30px;
        font-weight: 600;
        color: #4a90e2;
        text-decoration: none;
    }
    .admin-panel-link:hover {
        text-decoration: underline;
    }
</style>

<div class="dashboard-container">
    <div class="dashboard-header">
        <h1>Space Dashboard</h1>
        <a href="{{ url_for('space_admin_panel') }}" class="admin-panel-link">Go to Admin Panel</a>
        <div class="action-buttons">
            <a href="{{ url_for('download_filtered_space_data', search_query=search_query, fac_incharge=fac_incharge, staff_incharge=staff_incharge, min_area=min_area, max_area=max_area, min_pg_students=min_pg_students, max_pg_students=max_pg_students) }}" class="btn btn-success">Download Filtered Data</a>
            <form action="{{ url_for('delete_all_space_data') }}" method="POST" onsubmit="return confirm('Are you sure you want to delete all space data? This action cannot be undone.');">
                <button type="submit" class="btn btn-danger">Delete All Space Data</button>
            </form>
        </div>
    </div>

    <form method="GET" action="{{ url_for('space_dashboard') }}" class="filter-form">
        <div class="form-row">
            <div class="form-group">
                <input type="text" name="search_query" class="form-control" placeholder="Search..." value="{{ search_query }}">
            </div>
            <div class="form-group">
                <select name="fac_incharge" class="form-control">
                    <option value="">Select Fac-Incharge</option>
                    {% for option in fac_incharge_options %}
                        <option value="{{ option[0] }}" {% if fac_incharge == option[0] %}selected{% endif %}>{{ option[0] }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <select name="staff_incharge" class="form-control">
                    <option value="">Select Staff-Incharge</option>
                    {% for option in staff_incharge_options %}
                        <option value="{{ option[0] }}" {% if staff_incharge == option[0] %}selected{% endif %}>{{ option[0] }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <input type="number" step="0.01" name="min_area" class="form-control" placeholder="Min Area (sq. ft.)" value="{{ min_area }}">
            </div>
            <div class="form-group">
                <input type="number" step="0.01" name="max_area" class="form-control" placeholder="Max Area (sq. ft.)" value="{{ max_area }}">
            </div>
            <div class="form-group">
                <input type="number" name="min_pg_students" class="form-control" placeholder="Min PG Students" value="{{ min_pg_students }}">
            </div>
            <div class="form-group">
                <input type="number" name="max_pg_students" class="form-control" placeholder="Max PG Students" value="{{ max_pg_students }}">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Apply Filters</button>
                <a href="{{ url_for('space_dashboard') }}" class="btn btn-secondary">Clear Filters</a>
            </div>
        </div>
    </form>

    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Room No./Lab Name</th>
                    <th>Length (ft)</th>
                    <th>Breadth (ft)</th>
                    <th>Fac-Incharge</th>
                    <th>Staff-Incharge</th>
                    <th>Area (sq. ft.)</th>
                    <th>Area (sq. m.)</th>
                    <th>No. of PG students</th>
                    <th>Comments</th>
                    <th>Extra Column 1</th>
                    <th>Extra Column 2</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for space in spaces %}
                <tr>
                    <td>{{ space.room_no }}</td>
                    <td>{{ space.length }}</td>
                    <td>{{ space.breadth }}</td>
                    <td>{{ space.fac_incharge }}</td>
                    <td>{{ space.staff_incharge }}</td>
                    <td>{{ space.area_sq_ft }}</td>
                    <td>{{ space.area_sq_m }}</td>
                    <td>{{ space.no_of_pg_students }}</td>
                    <td>{{ space.comments }}</td>
                    <td>{{ space.extra_column1 }}</td>
                    <td>{{ space.extra_column2 }}</td>
                    <td>
                        <form action="{{ url_for('delete_space_data', id=space.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this space data?');">
                            <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    
</div>
{% endblock %}