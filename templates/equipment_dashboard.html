{% extends "layout.html" %}
{% block content %}
<div class="content-section">
    <h1>Equipment Dashboard</h1>

    <!-- Equipment Data Table -->
    <table class="table table-striped">
        <thead>
            <tr>
                <!-- <th>Sl No</th> -->
                <th>Description</th>
                <th>P.O. No. with Date</th>
                <th>Qty.</th>
                <th>Price</th>
                <th>Location</th>
                <th>Dept. Stock Register No.</th>
                <th>Status</th>
                <th>Remarks</th>
                <th>Extra Column 1</th>
                <th>Extra Column 2</th>
            </tr>
        </thead>
        <tbody>
            {% for equipment in equipment_data.items %}
            <tr>
                <td>{{ equipment.description }}</td>
                <td>{{ equipment.po_no_date }}</td>
                <td>{{ equipment.quantity }}</td>
                <td>{{ equipment.price }}</td>
                <td>{{ equipment.location }}</td>
                <td>{{ equipment.dept_stock_register_no }}</td>
                <td>{{ equipment.status }}</td>
                <td>{{ equipment.remarks }}</td>
                <td>{{ equipment.extra_column1 }}</td>
                <td>{{ equipment.extra_column2 }}</td>
                <td>
                    <form action="{{ url_for('delete_equipment', id=equipment.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this equipment data?');">
                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Pagination -->
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            {% for page_num in equipment_data.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
                {% if page_num %}
                    {% if equipment_data.page == page_num %}
                        <li class="page-item active">
                            <a class="page-link" href="{{ url_for('equipment_dashboard', page=page_num, search_query=search_query, status_filter=status_filter) }}">{{ page_num }}</a>
                        </li>
                    {% else %}
                        <li class="page-item">
                            <a class="page-link" href="{{ url_for('equipment_dashboard', page=page_num, search_query=search_query, status_filter=status_filter) }}">{{ page_num }}</a>
                        </li>
                    {% endif %}
                {% else %}
                    <li class="page-item disabled">
                        <span class="page-link">...</span>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </nav>

    <!-- Download Button -->
    <div class="text-center mt-4">
        <a href="{{ url_for('download_equipment_data') }}" class="btn btn-success">Download Equipment Data</a>
    </div>
    <div class="mt-4">
        <a href="{{ url_for('equipment_admin_panel') }}" class="btn btn-primary">View Equipment Admin Panel</a>
    </div>
</div>
{% endblock content %}